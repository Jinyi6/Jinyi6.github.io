{{/* layouts/blocks/resume-awards.html */}}
{{/* ä¿æŒåŸæœ‰ Date | (Emoji + Details) ç»“æ„ï¼Œä¿®å¤å¯¹é½é—®é¢˜ */}}

{{ $page := .wcPage }}
{{ $block := .wcBlock }}
{{ $author := $block.content.username | default "admin" }}
{{ $person_page := site.GetPage (printf "/authors/%s" $author) }}
{{ if not $person_page }}
  {{ errorf "Could not find an author page for '%s'. Ensure an author page exists at `content/authors/%s/_index.md`." $author $author }}
{{ end }}
{{ $awards := $person_page.Params.awards }}

{{/* å¯é€‰ï¼šå…è®¸é€šè¿‡ block.design.date_format é…ç½®æ—¥æœŸæ ¼å¼ */}}
{{ $dateFmt := $block.design.date_format | default "January 2006" }}

<div class="flex flex-col items-center max-w-prose mx-auto">
  <div class="w-full flex flex-col p-6">
    <h3 class="w-full mb-8 text-3xl font-bold text-gray-900 dark:text-white">{{ i18n "awards" | default "Awards" }}</h3>

    {{ if $awards }}
      {{ $emojis := slice "ğŸ†" "ğŸ“" "ğŸ¥‡" "ğŸ…" "ğŸ–ï¸" "âœ¨" "ğŸŒŸ" "ğŸ‰" }}

      <div class="awards-list w-full">
        {{ range $idx, $award := sort $awards ".date_start" "desc" }}
          {{ $date_display := "" }}
          {{ with $award.date }}
            {{ $date_display = (time .).Format $dateFmt }}
          {{ else }}
            {{ $date_display = i18n "present" | default "Present" }}
          {{ end }}

          {{ $emoji := index $emojis (mod $idx (len $emojis)) }}

          <div class="award-item flex items-start mb-6"> {{/* æ•´ä½“å®¹å™¨ï¼Œæ—¥æœŸå’Œè¯¦æƒ…æ°´å¹³æ’åˆ—ï¼Œé¡¶éƒ¨å¯¹é½ */}}

            {{/* Date Column: æ”¹ä¸ºå›ºå®šå®½åº¦ï¼Œç¡®ä¿å³ä¾§å†…å®¹èµ·ç‚¹ä¸€è‡´ */}}
            {{/* ä¾‹å¦‚ w-36 (9rem), w-40 (10rem)ã€‚è¯·æ ¹æ®ä½ æœ€é•¿çš„æ—¥æœŸå­—ç¬¦ä¸²è°ƒæ•´æ­¤å®½åº¦ã€‚ */}}
            {{/* ä¿ç•™ pr-4 æ˜¯ä¸ºäº†æ—¥æœŸæ–‡æœ¬å’Œè¿™ä¸€åˆ—å³è¾¹ç¼˜çš„é—´è· */}}
            {{/* flex-shrink-0 ç¡®ä¿æ­¤åˆ—å®½åº¦ä¸ä¼šè¢«å‹ç¼© */}}
            <div class="date-column w-44 pr-4 flex-shrink-0">
              <p class="font-bold text-black dark:text-white">
                {{ $date_display }}
              </p>
            </div>

            {{/* Details Column: ä½¿ç”¨ flex-1 æ¥å æ®å‰©ä½™ç©ºé—´ */}}
            <div class="details-column flex-1">
              <div class="flex items-start"> {{/* å†…éƒ¨flex: emoji å’Œ æ–‡æœ¬å†…å®¹ é¡¶éƒ¨å¯¹é½ */}}
                {{/*
                  Emoji container:
                  - w-7: å›ºå®šå®½åº¦ (1.75rem).
                  - mr-2: å³è¾¹è·.
                  - flex-shrink-0: é˜²æ­¢æ”¶ç¼©.
                  - flex, items-center, justify-center: å†…éƒ¨ emoji å±…ä¸­.
                  - pt-0.5 or pt-1: å¯ä»¥å¾®è°ƒ emoji å’Œæ—è¾¹æ ‡é¢˜æ–‡å­—çš„å‚ç›´å¯¹é½ï¼Œå¯é€‰ã€‚
                */}}
                <div class="emoji-container w-7 mr-2 flex-shrink-0 flex items-center justify-center pt-0.5"> {{/* pt-0.5 å¯é€‰ï¼Œç”¨äºå¾®è°ƒå‚ç›´å¯¹é½ */}}
                  <span>{{ $emoji }}</span>
                </div>
                <div class="text-content-container flex-grow">
                  <p class="font-bold text-black dark:text-white">
                    {{ $award.title | markdownify | emojify }}
                  </p>
                  {{ if $award.awarder }}
                  <p class="text-gray-500 dark:text-gray-400 text-sm mt-1">
                    by {{ $award.awarder | markdownify }}
                  </p>
                  {{ end }}
                  {{ if $award.summary }}
                  <p class="text-gray-600 dark:text-gray-300 text-sm mt-1">
                    {{ $award.summary | markdownify }}
                  </p>
                  {{ end }}
                </div>
              </div>
            </div>
          </div>
        {{ end }}
      </div>
    {{ else }}
      <p class="text-gray-500 dark:text-gray-400">{{ i18n "no_awards_found" | default "No awards to display at this time." }}</p>
    {{ end }}
  </div>
</div>