{{/* layouts/blocks/resume-awards.html */}}
{{/* 重写 Hugo Blox 的 “Awards” 区块，实现表格化对齐和调整间距 */}}

{{ $page := .wcPage }}
{{ $block := .wcBlock }}
{{ $author := $block.content.username | default "admin" }}
{{ $person_page := site.GetPage (printf "/authors/%s" $author) }}
{{ if not $person_page }}
  {{ errorf "Could not find an author page for '%s'. Ensure an author page exists at `content/authors/%s/_index.md`." $author $author }}
{{ end }}
{{ $awards := $person_page.Params.awards }}

{{/* 可选：允许通过 block.design.date_format 配置日期格式 */}}
{{ $dateFmt := $block.design.date_format | default "January 2006" }}

<div class="flex flex-col items-center max-w-prose mx-auto">
  <div class="w-full flex flex-col p-6">
    <h3 class="w-full mb-8 text-3xl font-bold text-gray-900 dark:text-white">{{ i18n "awards" | default "Awards" }}</h3>

    {{ if $awards }}
      {{ $emojis := slice "🏆" "🎓" "🥇" "🏅" "🎖️" "✨" "🌟" "🎉" }}

      <div class="awards-list w-full">
        {{ range $idx, $award := sort $awards ".date_start" "desc" }}
          {{ $date_display := "" }}
          {{ with $award.date }}
            {{ $date_display = (time .).Format $dateFmt }}
          {{ else }}
            {{ $date_display = i18n "present" | default "Present" }}
          {{ end }}

          {{ $emoji := index $emojis (mod $idx (len $emojis)) }}

          {{/* Each award item is a flex container, items aligned to the top */}}
          <div class="award-item flex items-start mb-6"> {{/* Increased bottom margin for better separation */}}

            {{/* 1. Emoji Column - Fixed width, centered emoji */}}
            <div class="emoji-column w-10 flex-shrink-0 flex items-center justify-center mr-3 pt-1"> {{/* w-10 (2.5rem) gives enough space, mr-3 for spacing to date, pt-1 for slight vertical adjustment */}}
              <span class="text-xl">{{ $emoji }}</span> {{/* text-xl to make emoji slightly larger, adjust as needed */}}
            </div>

            {{/* 2. Date Column - Fixed width, prevents content from pushing details */}}
            <div class="date-column w-40 flex-shrink-0 mr-4"> {{/* Increased width e.g., w-40 (10rem) for longer dates, adjust based on your longest date string. mr-4 for spacing to details */}}
              <p class="font-semibold text-gray-800 dark:text-gray-200"> {{/* Using semibold and slightly different color for emphasis */}}
                {{ $date_display }}
              </p>
            </div>

            {{/* 3. Details Column - Takes remaining space */}}
            <div class="details-column flex-grow">
              <p class="font-bold text-black dark:text-white">
                {{ $award.title | markdownify | emojify }}
              </p>
              {{ if $award.awarder }}
              <p class="text-gray-500 dark:text-gray-400 text-sm mt-1">
                by {{ $award.awarder | markdownify }}
              </p>
              {{ end }}
              {{ if $award.summary }}
              <p class="text-gray-600 dark:text-gray-300 text-sm mt-1">
                {{ $award.summary | markdownify }}
              </p>
              {{ end }}
            </div>
          </div>
        {{ end }}
      </div>
    {{ else }}
      <p class="text-gray-500 dark:text-gray-400">{{ i18n "no_awards_found" | default "No awards to display at this time." }}</p>
    {{ end }}
  </div>
</div>