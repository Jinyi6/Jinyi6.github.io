{{/* Experience + Education block rendered side-by-side on large screens */}}

{{ $page := .wcPage }}
{{ $block := .wcBlock }}

{{ $username := $block.content.username | default "admin" }}
{{ $person_page := site.GetPage (printf "/authors/%s" $username) }}
{{ if not $person_page }}
  {{ errorf "Could not find an author page for '%s'. Ensure an author page exists at `content/authors/%s/_index.md`." $username $username }}
{{ end }}

{{ $work := $person_page.Params.work }}
{{ $education := $person_page.Params.education }}
{{ $dateFmt := $block.design.date_format | default "January 2006" }}

<div class="w-full px-4">
  <div class="mx-auto flex w-full flex-col gap-10 max-w-5xl">
    <div class="grid grid-cols-1 gap-12 lg:grid-cols-2 experience-columns">

      <div class="w-full experience-column flex flex-col items-center">
        <div class="w-full max-w-md">
          <h2 class="section-title mb-6 text-center text-gray-900 dark:text-white">Experience</h2>

          {{ if $work }}
            <div class="space-y-10 text-left">
              {{ range $work }}
                {{ $start := "" }}
                {{ with .date_start }}{{ $start = (time .).Format $dateFmt }}{{ end }}
                {{ $end := "" }}
                {{ with .date_end }}{{ if ne . "" }}{{ $end = (time .).Format $dateFmt }}{{ end }}{{ end }}
                {{ if not $end }}{{ $end = i18n "present" | default "Present" }}{{ end }}

                <div>
                  <div class="text-lg font-semibold text-gray-900 dark:text-white">
                    {{ .position | markdownify | emojify }}
                  </div>
                  {{ if .company_name }}
                    <div class="text-sm text-gray-600 dark:text-gray-300">
                      {{ .company_name | markdownify | emojify }}
                    </div>
                  {{ end }}
                  <div class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                    {{ if $start }}
                      {{ $start }} – {{ $end }}
                    {{ else }}
                      {{ $end }}
                    {{ end }}
                  </div>
                  {{ if .summary }}
                    <div class="mt-3 text-sm text-gray-600 dark:text-gray-300 prose">
                      {{ .summary | markdownify | emojify }}
                    </div>
                  {{ end }}
                </div>
              {{ end }}
            </div>
          {{ else }}
            <p class="text-gray-500 dark:text-gray-400">{{ i18n "no_work_found" | default "No experience to display yet." }}</p>
          {{ end }}
        </div>
      </div>

      <div class="w-full education-column flex flex-col items-center">
        <div class="w-full max-w-md">
          <h2 class="section-title mb-6 text-center text-gray-900 dark:text-white">Education</h2>

          {{ if $education }}
            <div class="space-y-10 text-left">
              {{ range $education }}
                {{ $start := "" }}
                {{ with .date_start }}{{ $start = (time .).Format $dateFmt }}{{ end }}
                {{ $end := "" }}
                {{ with .date_end }}{{ if ne . "" }}{{ $end = (time .).Format $dateFmt }}{{ end }}{{ end }}
                {{ if not $end }}{{ $end = i18n "present" | default "Present" }}{{ end }}

                <div>
                  <div class="text-lg font-semibold text-gray-900 dark:text-white">
                    {{ .area | markdownify | emojify }}
                  </div>
                  {{ if .institution }}
                    <div class="text-sm text-gray-400 dark:text-gray-400">
                      {{ .institution | markdownify | emojify }}
                    </div>
                  {{ end }}
                  <div class="mt-1 text-sm text-gray-500 dark:text-gray-400">
                    {{ if $start }}
                      {{ $start }} – {{ $end }}
                    {{ else }}
                      {{ $end }}
                    {{ end }}
                  </div>
                  {{ if .summary }}
                    <div class="mt-3 text-sm text-gray-600 dark:text-gray-300 prose">
                      {{ .summary | markdownify | emojify }}
                    </div>
                  {{ end }}
                </div>
              {{ end }}
            </div>
          {{ else }}
            <p class="text-gray-500 dark:text-gray-400">{{ i18n "no_education_found" | default "No education entries to display yet." }}</p>
          {{ end }}
        </div>
      </div>

    </div>
  </div>
</div>
